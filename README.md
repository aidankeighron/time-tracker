# Supabase Time Tracker Extension

A cross-browser extension (Chrome, Firefox, Firefox Android) that tracks the time you spend on websites and syncs the data to a private Supabase database.

## Features

*   **Automated Tracking**: Automatically tracks active time on websites.
*   **Privacy Focused**: Data is stored locally and then synced to your own Supabase instance.
*   **Smart Sync**: 
    *   Syncs data every 5 minutes.
    *   Filters out browsing sessions shorter than 1 minute to reduce noise.
    *   Manual sync button available in the popup.
*   **Multi-Device Support**: Tracks usage per device (generates a unique Device ID) allowing you to aggregate data from multiple computers or mobile devices.
*   **Offline Capable**: Stores data locally in the browser and syncs when an internet connection is available.

## Database Setup

This extension requires a `website_usage` table in your Supabase database.

```sql
create table website_usage (
  id bigint generated by default as identity primary key,
  date date not null,
  website text not null,
  timespent numeric not null, -- stored in minutes
  device text not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  unique(date, website, device)
);
```

*Note: Ensure Row Level Security (RLS) is enabled and appropriate policies are set.*

## Configuration

1.  Create a `config.json` file in the root directory (based on `config.example.json` if available).
2.  Add your Supabase details:

```json
{
  "SUPABASE_URL": "https://your-project.supabase.co",
  "SUPABASE_ANON_KEY": "your-anon-key"
}
```

## Installation

### Chrome / Brave / Edge
1.  Open `chrome://extensions/`.
2.  Enable **Developer mode** (top right).
3.  Click **Load unpacked**.
4.  Select the `time-tracker` folder.

### Firefox (Desktop)
1.  Open `about:debugging#/runtime/this-firefox`.
2.  Click **Load Temporary Add-on...**.
3.  Select the `manifest-firefox.json` file.

### Firefox (Android)
1.  Setup remote USB debugging for Firefox Android.
2.  Load the extension using `manifest-firefox-android.json` via `web-ext` or the remote debugging tools.